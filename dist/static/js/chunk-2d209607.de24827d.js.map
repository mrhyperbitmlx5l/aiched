{"version":3,"sources":["webpack:///./src/applications/logs.vue?6669","webpack:///./src/api/types.js","webpack:///src/applications/logs.vue","webpack:///./src/applications/logs.vue?ff79","webpack:///./src/applications/logs.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","searchForm","validateStatus","validateMsg","staticStyle","disabledStartDate","dateFormat","on","dateChange","model","value","callback","$$v","$set","expression","disabledEndDate","handleChange","_v","search","columns","list","loading","pagination","handleTableChange","scopedSlots","_u","key","fn","text","record","status","_s","getStatus","staticRenderFns","EVENT","STATUS","component"],"mappings":"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","file":"static/js/chunk-2d209607.de24827d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-card',[_c('a-form',{staticClass:\"ant-advanced-search-form\",attrs:{\"layout\":\"inline\",\"form\":_vm.searchForm}},[_c('a-form-item',{attrs:{\"label\":\"时间范围\",\"validate-status\":_vm.validateStatus,\"help\":_vm.validateMsg}},[_c('a-date-picker',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"disabledDate\":_vm.disabledStartDate,\"format\":_vm.dateFormat,\"placeholder\":\"选择查询开始时间\"},on:{\"change\":_vm.dateChange},model:{value:(_vm.searchForm.startDate),callback:function ($$v) {_vm.$set(_vm.searchForm, \"startDate\", $$v)},expression:\"searchForm.startDate\"}}),_c('a-date-picker',{attrs:{\"disabledDate\":_vm.disabledEndDate,\"format\":_vm.dateFormat,\"placeholder\":\"选择查询结束时间\"},on:{\"change\":_vm.dateChange},model:{value:(_vm.searchForm.endDate),callback:function ($$v) {_vm.$set(_vm.searchForm, \"endDate\", $$v)},expression:\"searchForm.endDate\"}})],1),_c('a-form-item',{attrs:{\"label\":\"查询类型\"}},[_c('a-select',{staticStyle:{\"width\":\"120px\"},attrs:{\"defaultValue\":\"\"},on:{\"change\":_vm.handleChange},model:{value:(_vm.searchForm.type),callback:function ($$v) {_vm.$set(_vm.searchForm, \"type\", $$v)},expression:\"searchForm.type\"}},[_c('a-select-option',{attrs:{\"value\":\"\"}},[_vm._v(\"全部日志\")]),_c('a-select-option',{attrs:{\"value\":\"1001\"}},[_vm._v(\"登录日志\")]),_c('a-select-option',{attrs:{\"value\":\"1002\"}},[_vm._v(\"登出日志\")]),_c('a-select-option',{attrs:{\"value\":\"1003\"}},[_vm._v(\"上传日志\")]),_c('a-select-option',{attrs:{\"value\":\"1004\"}},[_vm._v(\"下载日志\")]),_c('a-select-option',{attrs:{\"value\":\"1005\"}},[_vm._v(\"上传审核\")]),_c('a-select-option',{attrs:{\"value\":\"1006\"}},[_vm._v(\"下载审核\")])],1)],1),_c('a-form-item',{attrs:{\"label\":\"查询手机号\"}},[_c('a-input',{staticStyle:{\"width\":\"90%\"},attrs:{\"placeholder\":\"请输入操作人手机号\"},model:{value:(_vm.searchForm.mobile),callback:function ($$v) {_vm.$set(_vm.searchForm, \"mobile\", $$v)},expression:\"searchForm.mobile\"}})],1),_c('a-form-item',[_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.search}},[_vm._v(\"查询\")])],1)],1),_c('a-table',{attrs:{\"columns\":_vm.columns,\"dataSource\":_vm.list,\"loading\":_vm.loading,\"rowKey\":\"id\",\"size\":\"middle\",\"bordered\":\"\",\"pagination\":_vm.pagination},on:{\"change\":_vm.handleTableChange},scopedSlots:_vm._u([{key:\"status\",fn:function(text, record){return [_c('a-tag',{attrs:{\"color\":record.status > 0 ? 'green' : 'red'}},[_vm._v(_vm._s(_vm.getStatus(record.status)))])]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const EVENT = {\r\n\t\"0001\":\"系统功能\",\r\n\t\"1001\":\"系统登录\",\r\n\t\"1002\":\"系统退出\",\r\n\t\"1003\":\"文档上传\",\r\n\t\"1004\":\"文档下载\",\r\n\t\"1005\":\"审核上传\",\r\n\t\"1006\":\"审核下载\",\r\n\t\"1007\":\"文档查阅\",\r\n} \r\n\r\nexport const STATUS = {\r\n\t'1':\"成功\",\r\n\t'-1':\"失败\",\r\n\t'0':\"默认\",\r\n} ","<template>\r\n\t<a-card>\r\n\t\t<a-form layout=\"inline\" class=\"ant-advanced-search-form\" :form=\"searchForm\">\r\n\t\t\t<a-form-item label=\"时间范围\" :validate-status=\"validateStatus\" :help=\"validateMsg\">\r\n\t\t\t\t<a-date-picker\r\n\t\t\t\t\t:disabledDate=\"disabledStartDate\"\r\n\t\t\t\t\t:format=\"dateFormat\"\r\n\t\t\t\t\tv-model=\"searchForm.startDate\"\r\n\t\t\t\t\tplaceholder=\"选择查询开始时间\"\r\n\t\t\t\t\tstyle=\"margin-right:10px\"\r\n\t\t\t\t\t@change=\"dateChange\"\r\n\t\t\t\t/>\r\n\t\t\t\t<a-date-picker :disabledDate=\"disabledEndDate\" :format=\"dateFormat\" v-model=\"searchForm.endDate\" placeholder=\"选择查询结束时间\" @change=\"dateChange\" />\r\n\t\t\t</a-form-item>\r\n\t\t\t<a-form-item label=\"查询类型\">\r\n\t\t\t\t<a-select defaultValue=\"\" style=\"width: 120px\" @change=\"handleChange\" v-model=\"searchForm.type\">\r\n\t\t\t\t\t<a-select-option value=\"\">全部日志</a-select-option>\r\n\t\t\t\t\t<a-select-option value=\"1001\">登录日志</a-select-option>\r\n\t\t\t\t\t<a-select-option value=\"1002\">登出日志</a-select-option>\r\n\t\t\t\t\t<a-select-option value=\"1003\">上传日志</a-select-option>\r\n\t\t\t\t\t<a-select-option value=\"1004\">下载日志</a-select-option>\r\n\t\t\t\t\t<a-select-option value=\"1005\">上传审核</a-select-option>\r\n\t\t\t\t\t<a-select-option value=\"1006\">下载审核</a-select-option>\r\n\t\t\t\t</a-select>\r\n\t\t\t</a-form-item>\r\n\t\t\t<a-form-item label=\"查询手机号\"><a-input placeholder=\"请输入操作人手机号\" v-model=\"searchForm.mobile\" style=\"width: 90%\" /></a-form-item>\r\n\t\t\t<a-form-item><a-button type=\"primary\" @click=\"search\">查询</a-button></a-form-item>\r\n\t\t</a-form>\r\n\t\t<a-table :columns=\"columns\" :dataSource=\"list\" :loading=\"loading\" rowKey=\"id\" size=\"middle\" bordered :pagination=\"pagination\" @change=\"handleTableChange\">\r\n\t\t\t<template slot=\"status\" slot-scope=\"text, record\">\r\n\t\t\t\t<a-tag :color=\"record.status > 0 ? 'green' : 'red'\">{{ getStatus(record.status) }}</a-tag>\r\n\t\t\t</template>\r\n\t\t</a-table>\r\n\t</a-card>\r\n</template>\r\n<script>\r\nimport moment from 'moment';\r\nimport { EVENT, STATUS } from '@/api/types';\r\nimport 'moment/locale/zh-cn';\r\nmoment.locale('zh-cn');\r\nconst columns = [\r\n\t{\r\n\t\ttitle: 'ID',\r\n\t\tdataIndex: 'id'\r\n\t},\r\n\t{\r\n\t\ttitle: '事件类型',\r\n\t\tdataIndex: 'event',\r\n\t\tcustomRender: (text, row) => {\r\n\t\t\treturn EVENT[row.event];\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\ttitle: '内容',\r\n\t\tdataIndex: 'context'\r\n\t},\r\n\t{\r\n\t\ttitle: '操作人',\r\n\t\tdataIndex: 'name'\r\n\t},\r\n\t{\r\n\t\ttitle: '日期',\r\n\t\tdataIndex: 'createDate'\r\n\t},\r\n\t{\r\n\t\ttitle: '事件状态',\r\n\t\tdataIndex: 'status',\r\n\t\tscopedSlots: {\r\n\t\t\tcustomRender: 'status'\r\n\t\t}\r\n\t}\r\n];\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tcolumns,\r\n\t\t\tsearchForm: {\r\n\t\t\t\tstartDate: moment(this.$store.state.session.date, this.dateFormat).subtract(30, 'days'),\r\n\t\t\t\tendDate: moment(this.$store.state.session.date, this.dateFormat),\r\n\t\t\t\ttype: '',\r\n\t\t\t\tmobile: ''\r\n\t\t\t},\r\n\t\t\tvalidateStatus: '',\r\n\t\t\tvalidateMsg: ''\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tdateFormat() {\r\n\t\t\treturn this.$store.state.manager.dateFormat;\r\n\t\t},\r\n\t\tlist() {\r\n\t\t\treturn this.$store.state.logs.list;\r\n\t\t},\r\n\t\tloading() {\r\n\t\t\treturn this.$store.state.logs.loading;\r\n\t\t},\r\n\t\tpagination() {\r\n\t\t\treturn this.$store.state.logs.pagination;\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tgetStatus(value) {\r\n\t\t\treturn STATUS[value];\r\n\t\t},\r\n\t\tmoment,\r\n\t\tdisabledStartDate(startValue) {\r\n\t\t\tconst endValue = this.searchForm.endDate;\r\n\t\t\tif (!startValue || !endValue) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn startValue.valueOf() > endValue.valueOf() || endValue.diff(startValue, 'days') > this.$store.state.app.dateRange;\r\n\t\t},\r\n\t\tdisabledEndDate(endValue) {\r\n\t\t\tconst startValue = this.searchForm.startDate;\r\n\t\t\tif (!endValue || !startValue) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn startValue.valueOf() > endValue.valueOf() || endValue.diff(startValue, 'days') > this.$store.state.app.dateRange;\r\n\t\t},\r\n\t\thandleTableChange(paginationData) {\r\n\t\t\tthis.$store.commit('logs/setPagination', paginationData);\r\n\t\t\tthis.$store.dispatch('logs/list', this.searchForm);\r\n\t\t},\r\n\t\t// 时间面板改变回调\r\n\t\tdateChange() {\r\n\t\t\tif (this.searchForm.startDate === null || this.searchForm.endDate === null) {\r\n\t\t\t\tthis.validateStatus = 'error';\r\n\t\t\t\tthis.validateMsg = '查询的时间范围是必选项';\r\n\t\t\t} else {\r\n\t\t\t\tthis.validateStatus = '';\r\n\t\t\t\tthis.validateMsg = '';\r\n\t\t\t}\r\n\t\t},\r\n\t\thandleChange(value) {\r\n\t\t\tconsole.log('selected' + value);\r\n\t\t},\r\n\t\tsearch() {\r\n\t\t\t//console.log('====>' + this.searchForm.startDate +(this.searchForm.startDate===null))\r\n\t\t\tif (this.searchForm.startDate != null && this.searchForm.endDate != null) {\r\n\t\t\t\t//console.log(JSON.stringify(this.searchForm));\r\n\t\t\t\tthis.$store.dispatch('logs/list', this.searchForm);\r\n\t\t\t} else {\r\n\t\t\t\tthis.$message.error('请选择查询时间范围，并且开始时间、结束时间在45天之内。', 2);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./logs.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./logs.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./logs.vue?vue&type=template&id=3e66a98a&\"\nimport script from \"./logs.vue?vue&type=script&lang=js&\"\nexport * from \"./logs.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}